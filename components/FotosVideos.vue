<script setup lang="ts">
const supabase = useSupabaseClient()
const { data: campeonato } = await supabase.from('campeonatos')
  .select('id, nome, status')
  .order('id', { ascending: false })
  .limit(1)
  .maybeSingle()

const fotos = import.meta.glob(`@/public/${campeonato.id}/fotos/*.jpeg`)
const videos = import.meta.glob(`@/public/${campeonato.id}/videos/*.mp4`)
</script>

<template>
  <Box id="fotos-e-videos" title="Fotos e VÃ­deos">
    <div class="grid lg:grid-cols-2 gap-6 p-6">
      <img v-for="foto in fotos"
        class="rounded-xl"
        :src="foto.name.replace('public/', '')"
        :key="foto.name"
        alt=""
      />
    </div>
    <div class="grid gap-6 p-6">
      <video
        v-for="video in videos"
        class="rounded-xl w-full aspect-video"
        controls
        :key="video.name"
      >
        <source
          :src="video.name.replace('public/', '')"
          type="video/mp4"
        >
      </video>
    </div>
  </Box>
</template>